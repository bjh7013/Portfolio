{"version":3,"sources":["webpack:///./src/components/PointMaker.vue?ba02","webpack:///./src/components/PointMaker.vue?97c0","webpack:///src/components/PointMaker.vue","webpack:///./src/components/PointMaker.vue?d97d","webpack:///./src/components/PointMaker.vue?d06b","webpack:///./node_modules/core-js/modules/es.array.last-index-of.js","webpack:///./node_modules/core-js/internals/array-last-index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","staticStyle","attrs","directives","name","rawName","value","expression","domProps","on","$event","target","composing","letter","getLetterImg","_v","curveLetter","pathString","next","submit","staticRenderFns","component","$","lastIndexOf","proto","forced","toIndexedObject","toInteger","toLength","arrayMethodIsStrict","arrayMethodUsesToLength","min","Math","nativeLastIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","FORCED","module","exports","searchElement","apply","arguments","O","length","index"],"mappings":"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","file":"js/chunk-29578f5d.e8e32fd1.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PointMaker.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PointMaker.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('canvas',{ref:\"c\",staticClass:\"lower-canvas\",staticStyle:{\"position\":\"relative\",\"border\":\"1px solid rgb(170, 170, 170)\",\"touch-action\":\"none\",\"user-select\":\"none\"},attrs:{\"id\":\"c\",\"width\":\"600px\",\"height\":\"600px\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.letter),expression:\"letter\"}],staticStyle:{\"background-color\":\"white\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.letter)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.letter=$event.target.value}}}),_c('button',{on:{\"click\":_vm.getLetterImg}},[_vm._v(\"get letter image\")]),_c('br'),_c('button',{on:{\"click\":_vm.curveLetter}},[_vm._v(\"to JSON\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pathString),expression:\"pathString\"}],attrs:{\"rows\":\"5\",\"cols\":\"50\"},domProps:{\"value\":(_vm.pathString)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pathString=$event.target.value}}}),_c('button',{staticStyle:{\"background-color\":\"white\"},on:{\"click\":_vm.next}},[_vm._v(\"다음 획\")]),_c('button',{staticStyle:{\"margin-left\":\"20px\",\"background-color\":\"white\"},on:{\"click\":_vm.submit}},[_vm._v(\"제출\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"wrapper\">\r\n        <canvas ref=\"c\" id=\"c\" width=\"600px\" height=\"600px\" style=\"position:relative; border: 1px solid rgb(170, 170, 170);  touch-action: none; user-select: none;\" class=\"lower-canvas\"></canvas>\r\n        <input style=\"background-color: white\" type=\"text\" v-model=\"letter\">\r\n        <button @click=\"getLetterImg\">get letter image</button>\r\n        <br>\r\n        <button @click=\"curveLetter\">to JSON</button>\r\n        <textarea v-model=\"pathString\" rows=\"5\" cols=\"50\"></textarea>\r\n        <button style=\"background-color: white\" @click=\"next\">다음 획</button>\r\n        \r\n        <button style=\"margin-left: 20px;background-color: white\" @click=\"submit\">제출</button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {fabric} from 'fabric';\r\nimport Axios from 'axios';\r\nexport default {\r\n    data(){\r\n        return {\r\n            letter: '',\r\n            pathString: '[\\n[',\r\n            curPathIdx: 0,\r\n            imgWidth:0,\r\n            imgHeight :0,\r\n            imgName: '',\r\n        }\r\n    },\r\n    methods: {\r\n        curveLetter(){\r\n            this.pathString = '[\\n['\r\n            \r\n            for(let i = 1; i < window.__canvas._objects.length; i++){\r\n                window.__canvas._objects[i].path.forEach( (p) => {\r\n                    this.pathString += `[${p[1]},${p[2]}],`\r\n                })\r\n                this.pathString = this.pathString.slice(0, -1)\r\n                this.pathString += '],\\n['\r\n            }\r\n            this.pathString = this.pathString.slice(0,-4)\r\n            this.pathString += ']\\n]'\r\n            Axios.post('/point',{\r\n                path : this.pathString,\r\n                imgWidth: this.imgWidth,\r\n                imgHeight: this.imgHeight,\r\n                fileName : `${this.imgName}.json`,\r\n                ani : true\r\n            })\r\n        },\r\n        getLetterImg(){\r\n            let uri = encodeURI(`letter/${this.letter}`)\r\n            fabric.Image.fromURL(`${this.$store.getters.BACKEND_URL}/${uri}.png`, (img) =>{\r\n                img.set({\r\n                    left:0,\r\n                    top: 0,\r\n                })\r\n                this.canvas.add(img)\r\n                this.imgWidth = img.width\r\n                this.imgHeight = img.height\r\n                this.imgName = this.letter\r\n            })\r\n        },\r\n        init(){\r\n            this.prepareCanvas();\r\n            this.canvas = window.__canvas;\r\n            this.setEventHandlers();\r\n        },\r\n        prepareCanvas() {\r\n            var canvas = window.__canvas = new fabric.Canvas('c', {\r\n                isDrawingMode: true\r\n            });\r\n            fabric.Object.prototype.transparentCorners = false;\r\n            canvas.freeDrawingBrush.width = 4\r\n            /////////////////////\r\n            var canvases = window.__canvases || window.canvases;\r\n\r\n            canvas && canvas.calcOffset && canvas.calcOffset();\r\n\r\n            if (canvases && canvases.length) {\r\n                for (var i = 0, len = canvases.length; i < len; i++) {\r\n                    canvases[i].calcOffset();\r\n                }\r\n            }\r\n        },\r\n        setEventHandlers(){\r\n            document.addEventListener('keydown', this.undo)\r\n            this.canvas.on('mouse:down', this.setPoint)\r\n            // let canvasContainer = document.getElementsByClassName('canvas-container')[0]\r\n            // ///////////////////////////////////////////////Bubling을 활용해 canvas와 div태그로부터 전파되는 이벤트 감지\r\n            // canvasContainer.addEventListener('mousedown', this.mouseDown)\r\n            // canvasContainer.addEventListener('mouseup', this.mouseUp)\r\n            ////////////////////////////////////////////\r\n            // this.canvas.on('mouse:move',this.onDrawingMouseMove)\r\n        },\r\n        setPoint(e){\r\n            this.pathString += `[${Math.round(e.pointer.x)}, ${Math.round(e.pointer.y)}],`\r\n        },\r\n        next(){\r\n            this.pathString = this.pathString.slice(0,-1)\r\n            this.pathString += '],\\n['\r\n        },\r\n        submit(){\r\n            this.pathString = this.pathString.slice(0,-1)\r\n            this.pathString += ']\\n]'\r\n            Axios.post('/point',{\r\n                path : this.pathString,\r\n                imgWidth: this.imgWidth,\r\n                imgHeight: this.imgHeight,\r\n                fileName : `${this.imgName}.json`\r\n            })\r\n        },\r\n        undo(e){\r\n            if (e.keyCode == 90 && e.ctrlKey){\r\n                let idx = this.pathString.lastIndexOf('[')\r\n                if(idx > 2){\r\n                    this.pathString = this.pathString.slice(0,idx)\r\n                    this.canvas._objects.pop()\r\n                    this.canvas.renderAll()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        if(document.readyState == 'complete'){\r\n            this.init()\r\n        }else{\r\n            window.onload = this.init\r\n        }\r\n        // document.getElementsByClassName('upper-canvas')[0].addEventListener('click', ()=> {console.log('upper')})\r\n    }        \r\n}\r\n</script>\r\n\r\n<style>\r\n.wrapper{\r\n    position: absolute;\r\n    top:0;\r\n    left:0;\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PointMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PointMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PointMaker.vue?vue&type=template&id=5922054a&\"\nimport script from \"./PointMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./PointMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PointMaker.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n"],"sourceRoot":""}