(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-230a8912"],{"18ba":function(t,e,i){"use strict";var n=i("1dda"),o=i.n(n);o.a},"1dda":function(t,e,i){},"943e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"},attrs:{id:"blog-article-detail"}},[i("div",{staticClass:"blog-article-main",staticStyle:{width:"100%"}},[i("v-row",{staticClass:"blog-article-title px-3 mt-5",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"blog-title-content",attrs:{align:"left"}},[i("v-btn",{staticClass:"ml-0 pl-0 mb-6",attrs:{text:"",dense:"",color:"black"},on:{click:t.backList}},[i("v-icon",[t._v("mdi-arrow-left")]),t._v("목록 ")],1),i("div",{staticClass:"pl-3"},[i("h6",[t._v("|"+t._s(t.booktagcat.book.categoryName))]),i("h3",{staticClass:"mb-3"},[t._v(t._s(t.booktagcat.book.bookTitle))])])],1),i("v-spacer")],1),i("v-row",{staticClass:"mx-1",staticStyle:{"justify-content":"space-between"}},[i("v-row",{staticClass:"px-6"},[i("v-avatar",{staticClass:"mr-2",attrs:{color:"white"}},[i("img",{attrs:{src:t.serverURL+t.booktagcat.book.profileImg,alt:"John"}})]),i("div",{staticClass:"blog-title-user"},[i("p",{staticClass:"m-0 pt-1 caption"},[i("router-link",{staticClass:"text-decoration-none text-dark",attrs:{to:"/bloghome/"+t.booktagcat.book.userId}},[t._v(" "+t._s(t.booktagcat.book.nickName)+" ")]),t.$store.getters.userInfo&&this.booktagcat.book.writer!=t.$store.getters.userInfo.userNo&&!this.check?i("v-btn",{staticClass:"ml-1",staticStyle:{"border-radius":"5px"},attrs:{"x-small":"",tile:"",dense:"",outlined:"",color:"indigo"},on:{click:t.follow}},[i("v-icon",{attrs:{"x-small":""}},[t._v("mdi-account-plus")]),t._v(" Follow ")],1):t.$store.getters.userInfo&&this.booktagcat.book.writer!=t.$store.getters.userInfo.userNo&&this.check?i("v-btn",{staticClass:"ml-1",staticStyle:{"border-radius":"5px"},attrs:{"x-small":"",tile:"",dense:"",outlined:"",color:"red"},on:{click:t.unfollow}},[i("v-icon",{attrs:{"x-small":""}},[t._v("mdi-account-plus")]),t._v(" UnFollow ")],1):t._e()],1),i("p",{staticClass:"m-0 caption",attrs:{align:"left"}},[t._v(t._s(t.booktagcat.book.writeDate))])])],1),i("div",[i("div",{staticStyle:{height:"12px"}}),i("v-row",[!this.userInfo||this.userInfo&&this.booktagcat.book.writer!=this.userInfo.userNo?[i("v-btn",{class:"mx-0 px-0 "+(t.booktagcat.book.favoriteDate?"yellow--text":""),attrs:{icon:""},on:{click:t.clickFav}},[i("v-icon",[t._v("mdi-star")])],1)]:this.userInfo&&this.booktagcat.book.writer==this.userInfo.userNo?[i("v-btn",{staticClass:"mx-0 px-0",attrs:{icon:"",color:"grey"}},[i("v-icon",{on:{click:t.modifyBook}},[t._v("mdi-pencil")])],1)]:t._e()],2)],1)],1),i("hr"),i("div",{staticClass:"book"},[i("div",{staticClass:"demo-block bg-light pt-3 pb-3 overflow-hidden"},[i("div",{staticClass:"container"},[i("div",{attrs:{id:"htmlBook"}},[i("div",{staticClass:"flip-book html-book stf__wrapper --landscape",staticStyle:{"min-width":"350px","min-height":"467px",width:"100%","max-width":"1400px",display:"block","padding-bottom":"66.6364%"},attrs:{id:"htmlBookExample"}},[i("div",{staticClass:"stf__block"},[i("div",{staticClass:"page stf__item"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-text"},[i("h1",[t._v(t._s(t.booktagcat.book.bookTitle))])])])]),i("div",{staticClass:"page stf__item"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-text",domProps:{innerHTML:t._s(t.booktagcat.book.bookIndex)}})])]),i("div",{domProps:{innerHTML:t._s(t.booktagcat.book.bookContent)}}),i("div",{staticClass:"page stf__item"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-text",domProps:{innerHTML:t._s(t.booktagcat.book.bookReference)}})])]),i("div",{staticClass:"page stf__item"})])])])]),t._m(0)])]),i("div",{staticClass:"mt-5",attrs:{align:"left"}},[i("div",{staticClass:"mb-2"},[t._l(t.booktagcat.booktag,(function(e){return i("v-chip",{key:e.tagNo,staticClass:"mr-2",attrs:{label:"",color:"#EEEEEE"}},[t._v(" #"+t._s(e.tagName)+" ")])})),t._l(t.booktagcat.tmptag,(function(e){return i("v-chip",{key:e.tmptagNo,staticClass:"mr-2",attrs:{label:"",color:"#EEEEEE"}},[t._v(" #"+t._s(e.tmptagName)+" ")])}))],2),i("v-row",{staticClass:"pl-3"},[i("v-btn",{class:"mx-0 "+(t.booktagcat.book.likeDate?"red--text":""),attrs:{icon:""},on:{click:t.hitBookLike}},[i("v-icon",[t._v("mdi-heart")])],1),i("div",{staticClass:"mr-3"},[i("div",{staticStyle:{height:"5px"}}),i("span",{staticStyle:{color:"grey"}},[t._v(t._s(t.booktagcat.book.likeCount)+"명이 좋아합니다")])]),i("v-btn",{staticClass:"mx-0",attrs:{icon:"",color:"grey"},on:{click:function(e){t.commentToggle=!t.commentToggle}}},[i("v-icon",[t._v("mdi-comment-text-outline")])],1),i("div",[i("div",{staticStyle:{height:"5px"}}),i("span",{staticStyle:{color:"grey"}},[t._v(t._s(t.comment.length)+"개 댓글이 있습니다")])])],1)],1),i("hr"),i("v-alert",{attrs:{value:t.commentToggle,transition:"scale-transition"}},[i("form",[i("v-row",[i("span",{staticClass:"px-3 font-weight-black"},[i("div",{staticStyle:{height:"6px"}}),t._v(" 댓글 ")]),i("v-text-field",{attrs:{placeholder:"댓글 작성",outlined:"",clearable:"",dense:"",required:""},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.commentArea,callback:function(e){t.commentArea=e},expression:"commentArea"}}),i("v-btn",{staticClass:"mx-4 font-weight-black",on:{click:t.commentWrite}},[t._v("작성")])],1)],1),t.comment.length>0?[t._l(t.comment,(function(e){return i("div",{key:e.commentNo},[i("div",{staticClass:"py-5 px-5",style:1==e.isPick?"background-color:#EEEE;":""},[i("v-row",{staticClass:"pb-5",staticStyle:{"justify-content":"space-between"}},[i("v-row",{staticClass:"blog-comment-profile pl-2"},[i("div",{staticStyle:{width:"30px"}}),i("v-avatar",{attrs:{size:"40"}},[i("v-img",{attrs:{src:t.serverURL+e.profileImg}})],1),i("div",{staticClass:"px-2"},[i("div",{staticStyle:{height:"10px"}}),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.nickName))])]),1==e.isPick?[i("div",[i("div",{staticStyle:{height:"10px"}}),i("span",{staticClass:"pr-2"},[t._v("·")]),i("span",{staticClass:"pr-2 font-weight-bold"},[t._v("채택된 답변")])]),i("v-icon",{attrs:{color:"green lighten-2"}},[t._v("mdi-checkbox-marked-circle")])]:t._e()],2),t.$store.getters.userInfo&&t.$store.getters.userInfo.userNo==e.userNo?[i("v-row",{staticClass:"mr-6",staticStyle:{"justify-content":"flex-end"}},[i("div",{staticClass:"my-1 mx-0",attrs:{align:"right"}},[i("v-btn",{attrs:{text:"",dense:""},on:{click:function(i){t.editCommentContent=e.content,t.dialog=!0,t.editCommentNo=e.commentNo}}},[t._v("수정")])],1),i("v-dialog",{attrs:{persistent:"","max-width":"1000"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("댓글")]),i("v-card-text",[i("v-text-field",{model:{value:t.editCommentContent,callback:function(e){t.editCommentContent=e},expression:"editCommentContent"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.commentModify()}}},[t._v("확인")]),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("취소")])],1)],1)],1),i("div",{staticClass:"my-1 mx-0",attrs:{align:"right"}},[i("v-btn",{attrs:{text:"",dense:"",color:"error"},on:{click:function(i){return t.commentDelete(e.commentNo)}}},[t._v("삭제")])],1)],1)]:t._e()],2),i("div",{attrs:{align:"left"}},[i("p",{staticClass:"pl-3 mb-0"},[t._v(" "+t._s(e.content)+" ")])]),i("v-row",{staticClass:"px-3 mt-0",staticStyle:{"justify-content":"space-between",color:"grey"}},[i("div",[i("div",{staticStyle:{height:"10px"}}),i("p",{staticClass:"pl-3 mb-0 font-weight-light"},[t._v(t._s(e.writeDate))])]),i("v-spacer"),i("div",[i("v-row",[1!=e.isPick?[t.userInfo&&t.booktagcat.book.writer==t.userInfo.userNo?i("div",{staticClass:"my-2",on:{click:function(i){return t.pickComment(e)}}},[i("v-btn",{attrs:{text:"",outlined:"",small:""}},[t._v("채택")])],1):t._e()]:t._e(),1==e.isPick?[t.userInfo&&t.booktagcat.book.writer==t.userInfo.userNo?i("div",{staticClass:"my-2",on:{click:function(i){return t.pickComment(e)}}},[i("v-btn",{attrs:{text:"",outlined:"",small:""}},[t._v("채택취소")])],1):t._e()]:t._e(),i("div",{staticClass:"mx-6"},[i("div",{staticStyle:{height:"3px"}}),i("v-row",{staticClass:"pr-5"},[i("v-btn",{class:"mx-0 "+(e.likeDate?"red--text":""),attrs:{icon:""},on:{click:function(i){return t.hitCommentLike(e)}}},[i("v-icon",[t._v("mdi-heart")])],1),i("div",{staticClass:"mr-3"},[i("div",{staticStyle:{height:"5px"}}),i("span",{staticStyle:{color:"grey"}},[t._v(t._s(e.likeCount))])])],1)],1)],2)],1)],1)],1)])})),i("br")]:[i("p",[t._v("입력된 댓글이 없습니다.")])]],2),i("v-slide-group",{staticClass:"pa-4",attrs:{"center-active":"","show-arrows":""}},t._l(t.blogbooks,(function(e){return i("v-slide-item",{key:e.bookNo,scopedSlots:t._u([{key:"default",fn:function(n){var o=n.active,a=n.toggle;return[i("v-card",{staticClass:"mx-4 mt-0 mb-5",attrs:{color:o?"primary":"grey lighten-1",img:t.serverURL+e.coverFront,height:"100",width:"150"},on:{mouseover:a,click:function(i){return t.go_book(e)}}},[i("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}}),e.bookNo!=t.$route.params.bookNo?i("p",[t._v(t._s(e.bookTitle))]):t._e(),e.bookNo==t.$route.params.bookNo?i("p",{staticStyle:{"background-color":"#BBDEFB"}},[t._v(t._s(e.bookTitle))]):t._e()],1)]}}],null,!0)})})),1),i("hr")],1)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"text-center mt-3 mb-2"},[i("button",{staticClass:"btn btn-info btn-sm btn-book-prev",attrs:{type:"button"}},[t._v("Previous page")]),t._v(" ["),i("span",{staticClass:"page-count"},[t._v("10")]),t._v(" of "),i("span",{staticClass:"page-total"},[t._v("10")]),t._v("] "),i("button",{staticClass:"btn btn-info btn-sm btn-book-next",attrs:{type:"button"}},[t._v("Next page")])])])}],a=(i("a4d3"),i("e01a"),i("944a"),i("99af"),i("cb29"),i("4de4"),i("4160"),i("caad"),i("a15b"),i("d81d"),i("fb6a"),i("a434"),i("0c47"),i("23dc"),i("b64b"),i("d3b7"),i("25f0"),i("498a"),i("159b"),i("45eb")),s=i("7e84"),r=i("b85c"),h=i("262e"),l=i("2caf"),c=i("d4ec"),u=i("bee2"),g=i("53ca"),d=i("bc3a"),p=i.n(d),f=i("b5ae"),v={name:"BookDetail",validations:{name:{required:f["required"]}},methods:{bookAnimation:function(){!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==Object(g["a"])(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var n=i(2),o=i(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a),t.exports=o.locals||{}},function(t,e,i){i(6),t.exports=i(5)},function(t,e,i){var n,o=function(){return void 0===n&&(n=Boolean(window&&window.document&&window.document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var i=window.document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),s=[];function r(t){for(var e=-1,i=0;i<s.length;i++)if(s[i].identifier===t){e=i;break}return e}function h(t,e){for(var i={},n=[],o=0;o<t.length;o++){var a=t[o],h=e.base?a[0]+e.base:a[0],l=i[h]||0,c="".concat(h," ").concat(l);i[h]=l+1;var u=r(c),g={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(s[u].references++,s[u].updater(g)):s.push({identifier:c,updater:v(g,e),references:1}),n.push(c)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=a(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function g(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var a=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function d(t,e,i){var n=i.css,o=i.media,a=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,f=0;function v(t,e){var i,n,o;if(e.singleton){var a=f++;i=p||(p=l(e)),n=g.bind(null,i,a,!1),o=g.bind(null,i,a,!0)}else i=l(e),n=d.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var i=h(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=r(i[n]);s[o].references--}for(var a=h(t,e),l=0;l<i.length;l++){var c=r(i[l]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}i=a}}}},function(t,e,i){(e=i(4)(!1)).push([t.i,".stf__wrapper {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n}\n\n.stf__wrapper canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n}\n\n.stf__outerShadow {\n  position: absolute;\n}\n\n.stf__innerShadow {\n  position: absolute;\n}",""]),t.exports=e},function(t,e,i){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i,n,o,a=t[1]||"",s=t[3];if(!s)return a;if(e&&"function"==typeof btoa){var r=(i=s,n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(o," */")),h=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[a].concat(h).concat([r]).join("\n")}return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(o[s]=!0)}for(var r=0;r<t.length;r++){var h=[].concat(t[r]);n&&o[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),e.push(h))}},e}},function(t,e,i){},function(t,e,i){i.r(e);var n=function(){function t(e){Object(c["a"])(this,t),this.state={angle:0,area:[],corners:null,position:{x:0,y:0}},this.render=e}return Object(u["a"])(t,[{key:"setPosition",value:function(t){this.state.position=t}},{key:"setAngle",value:function(t){this.state.angle=t}},{key:"setArea",value:function(t){this.state.area=t}},{key:"setCorners",value:function(t){this.state.corners=t}},{key:"getAngle",value:function(){return this.state.angle}}]),t}(),o=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n){var o;return Object(c["a"])(this,i),o=e.call(this,t),o.image=null,o.isLoad=!1,o.loadingAngle=0,o.image=new Image,o.image.src=n,o}return Object(u["a"])(i,[{key:"draw",value:function(){var t=this.render.getContext(),e=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,n=this.render.getRect().height;t.save(),t.translate(e.x,e.y),t.beginPath();var o,a=Object(r["a"])(this.state.area);try{for(a.s();!(o=a.n()).done;){var s=o.value;null!==s&&(s=this.render.convertToGlobal(s),t.lineTo(s.x-e.x,s.y-e.y))}}catch(l){a.e(l)}finally{a.f()}if(t.rotate(this.state.angle),t.clip(),this.isLoad)t.drawImage(this.image,0,0,i,n);else{t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(1,1,i-1,n-1),t.stroke(),t.fill();var h={x:i/2,y:n/2};t.beginPath(),t.lineWidth=10,t.arc(h.x,h.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}t.restore()}},{key:"simpleDraw",value:function(t){var e=this.render.getRect(),i=this.render.getContext(),n=e.pageWidth,o=e.height,a=1===t?e.left+e.pageWidth:e.left,s=e.top;if(this.isLoad)i.drawImage(this.image,a,s,n,o);else{i.beginPath(),i.strokeStyle="rgb(200, 200, 200)",i.fillStyle="rgb(255, 255, 255)",i.lineWidth=1,i.rect(a+1,s+1,n-1,o-1),i.stroke(),i.fill();var r={x:a+n/2,y:s+o/2};i.beginPath(),i.lineWidth=10,i.arc(r.x,r.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),i.stroke(),i.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}}},{key:"load",value:function(){var t=this;this.isLoad||(this.image.onload=function(){t.isLoad=!0})}}]),i}(n),g=function(){function t(e,i){Object(c["a"])(this,t),this.pages=[],this.render=i,this.app=e}return Object(u["a"])(t,[{key:"getPageCount",value:function(){return this.pages.length}},{key:"getPages",value:function(){return this.pages}},{key:"getPage",value:function(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}},{key:"show",value:function(t){t<0||t>=this.pages.length||(this.app.updatePage(t),"portrait"===this.render.getOrientation()?(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t])):(t===this.pages.length-1&&t--,this.render.setLeftPage(this.pages[t]),this.render.setRightPage(this.pages[t+1])))}}]),t}(),d=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o){var a;return Object(c["a"])(this,i),a=e.call(this,t,n),a.imagesHref=o,a}return Object(u["a"])(i,[{key:"load",value:function(){var t,e=Object(r["a"])(this.imagesHref);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=new o(this.render,i);n.load(),this.pages.push(n)}}catch(a){e.e(a)}finally{e.f()}}}]),i}(g),p=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"GetDestinationFromTwoPoint",value:function(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"GetSegmentLength",value:function(e){return t.GetDestinationFromTwoPoint(e[0],e[1])}},{key:"GetAngleFromTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,o=t[1].x-t[0].x,a=e[1].x-e[0].x;return Math.acos((i*n+o*a)/(Math.sqrt(i*i+o*o)*Math.sqrt(n*n+a*a)))}},{key:"PointInRect",value:function(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}},{key:"GetRotatedPoint",value:function(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}},{key:"GetIntersectByLineAndCircle",value:function(e,i,n){if(t.GetDestinationFromTwoPoint(e,n)<=i)return n;var o=e.x,a=e.y,s=n.x,r=n.y,h=Math.sqrt(Math.pow(i,2)*Math.pow(o-s,2)/(Math.pow(o-s,2)+Math.pow(a-r,2)))+o;n.x<0&&(h*=-1);var l=(h-o)*(a-r)/(o-s)+a;return o-s+a===0&&(l=i),{x:h,y:l}}},{key:"GetIntersectByTwoSegment",value:function(e,i,n){return t.PointInRect(e,t.GetIntersectByTwoLine(i,n))}},{key:"GetIntersectByTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,o=t[1].x-t[0].x,a=e[1].x-e[0].x,s=t[0].x*t[1].y-t[1].x*t[0].y,r=e[0].x*e[1].y-e[1].x*e[0].y,h=i*r-n*s,l=o*r-a*s,c=-(s*a-r*o)/(i*a-n*o),u=-(i*r-n*s)/(i*a-n*o);if(isFinite(c)&&isFinite(u))return{x:c,y:u};if(Math.abs(h-l)<.1)throw new Error("Segment included");return null}},{key:"GetCordsFromTwoPoint",value:function(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),o=Math.max(i,n),a=[t];function s(t,e,i,n,o){return e>t?t+o*(i/n):e<t?t-o*(i/n):t}for(var r=1;r<=o;r++)a.push({x:s(t.x,e.x,i,o,r),y:s(t.y,e.y,n,o,r)});return a}}]),t}(),f=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n){var o;return Object(c["a"])(this,i),o=e.call(this,t),o.copiedElement=null,o.isLoad=!1,o.element=n,o.element.classList.add("stf__item"),o.element.style.position="absolute",o.element.style.left="0",o.element.style.top="0",o.element.style.boxSizing="border-box",o}return Object(u["a"])(i,[{key:"draw",value:function(){var t=this.render.convertToGlobal(this.state.position),e=this.render.getRect().pageWidth,i=this.render.getRect().height;this.element.classList.remove("--simple"),this.element.style.display="block",this.element.style.left="0",this.element.style.top="0",this.element.style.transformOrigin="0 0",this.element.style.width=e+"px",this.element.style.height=i+"px";var n,o="polygon( ",a=Object(r["a"])(this.state.area);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!==s){var h=1===this.render.getDirection()?{x:-s.x+this.state.position.x,y:s.y-this.state.position.y}:{x:s.x-this.state.position.x,y:s.y-this.state.position.y};h=p.GetRotatedPoint(h,{x:0,y:0},this.state.angle),o+=h.x+"px "+h.y+"px, "}}}catch(l){a.e(l)}finally{a.f()}o=o.slice(0,-2),o+=")",this.element.style.clipPath=o,this.element.style.setProperty("-webkit-clip-path",o),this.element.style.transform="translate3d("+t.x+"px, "+t.y+"px, 0) rotate("+this.state.angle+"rad)"}},{key:"simpleDraw",value:function(t){if(!this.element.classList.contains("--simple")){null===this.copiedElement&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement));var e=this.render.getRect(),i=e.pageWidth,n=e.height,o=1===t?e.left+e.pageWidth:e.left,a=e.top;this.element.classList.add("--simple"),this.copiedElement.style.cssText="position: absolute; display: block; height: "+n+"px; left: "+o+"px; top: "+a+"px; width: "+i+"px; z-index: "+(this.render.getSettings().startZIndex+1)+";",this.element.style.cssText="display: none"}}},{key:"clearSaved",value:function(){this.element.classList.remove("--simple"),null!==this.copiedElement&&(this.copiedElement.remove(),this.copiedElement=null)}},{key:"getElement",value:function(){return this.element}},{key:"load",value:function(){this.isLoad=!0}}]),i}(n),v=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o,a){var s;return Object(c["a"])(this,i),s=e.call(this,t,n),s.element=o,s.pagesElement=a,s}return Object(u["a"])(i,[{key:"load",value:function(){var t,e=Object(r["a"])(this.pagesElement);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=new f(this.render,i);n.load(),this.pages.push(n)}}catch(o){e.e(o)}finally{e.f()}}}]),i}(g),m=function(){function t(e,i,n,o){Object(c["a"])(this,t),this.direction=e,this.corner=i,this.pageWidth=n,this.pageHeight=o,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null}return Object(u["a"])(t,[{key:"calc",value:function(t){try{this.position=this.preparePosition(t),this.calculateIntersectPoint(this.position)}catch(t){}}},{key:"getPageRect",value:function(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}},{key:"getRectFromBasePoint",value:function(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}},{key:"getRotatedPoint",value:function(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}},{key:"updateAngleAndGeometry",value:function(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}},{key:"calculateIntersectPoint",value:function(t){var e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=p.GetIntersectByTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=p.GetIntersectByTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=p.GetIntersectByTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=p.GetIntersectByTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=p.GetIntersectByTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=p.GetIntersectByTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}},{key:"checkPositionAtCenterLine",value:function(t,e,i){var n=t,o=p.GetIntersectByLineAndCircle(e,this.pageWidth,n);n!==o&&(n=o,this.updateAngleAndGeometry(n));var a=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2)),s=this.rect.bottomRight,r=this.rect.topLeft;if("bottom"===this.corner&&(s=this.rect.topRight,r=this.rect.bottomLeft),s.x<=0){var h=p.GetIntersectByLineAndCircle(i,a,r);h!==n&&(n=h,this.updateAngleAndGeometry(n))}return n}},{key:"preparePosition",value:function(t){var e=t;if(this.updateAngleAndGeometry(e),e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}},{key:"calculateAngle",value:function(t){var e=this.pageWidth-t.x,i="bottom"===this.corner?this.pageHeight-t.y:t.y,n=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(n=-n);var o=Math.PI-n;if(!isFinite(n)||o>=0&&o<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(n=-n),n}},{key:"getAngle",value:function(){return 0===this.direction?-this.angle:this.angle}},{key:"getRect",value:function(){return this.rect}},{key:"getPosition",value:function(){return this.position}},{key:"getActiveCorner",value:function(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}},{key:"getDirection",value:function(){return this.direction}},{key:"getIntersectPoint",value:function(){return{top:this.topIntersectPoint,bottom:this.bottomIntersectPoint,side:this.sideIntersectPoint}}},{key:"getSegmentToShadowLine",value:function(){var t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}},{key:"getShadowStartPoint",value:function(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}},{key:"getShadowAngle",value:function(){var t=p.GetAngleFromTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}},{key:"getShadowLength",value:function(){return p.GetSegmentLength(this.getSegmentToShadowLine())}},{key:"getFlippingProgress",value:function(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}},{key:"getFlippingClipArea",value:function(){var t=[],e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}},{key:"getCorner",value:function(){return this.corner}},{key:"getBottomClipArea",value:function(){var t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?p.GetDestinationFromTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}},{key:"getBottomPagePosition",value:function(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}}]),t}(),y=function(){function t(e,i){Object(c["a"])(this,t),this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=e,this.app=i}return Object(u["a"])(t,[{key:"getCalculation",value:function(){return this.calc}},{key:"start",value:function(t){this.reset();var e=this.render.convertToBook(t),i=this.getBoundsRect(),n=0;"portrait"===this.render.getOrientation()?e.x-i.pageWidth<=i.width/5&&(n=1):e.x<i.width/2&&(n=1);var o=e.y>=i.height/2?"bottom":"top";if(!this.checkDirection(n))return!1;try{return this.flippingPage=this.getFlippingPage(n),this.bottomPage=this.getBottomPage(n),!(!this.flippingPage||!this.bottomPage)&&(this.render.setDirection(n),this.calc=new m(n,o,i.pageWidth,i.height),!0)}catch(t){return!1}}},{key:"showCorner",value:function(t){if(this.checkState("read","fold_corner")){var e=this.getBoundsRect(),i=e.pageWidth,n=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,o=this.render.convertToBook(t);if(o.x>0&&o.y>0&&o.x<e.width&&o.y<e.height&&(o.x<n||o.x>e.width-n)&&(o.y<n||o.y>e.height-n))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:i-1,y:1});var a=50,s="bottom"===this.calc.getCorner()?e.height-1:1,r="bottom"===this.calc.getCorner()?e.height-a:a;this.animateFlippingTo({x:i-1,y:s},{x:i-a,y:r},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}}},{key:"fold",value:function(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}},{key:"flip",value:function(t){if(null!==this.calc&&this.render.finishAnimation(),this.start(t)){var e=this.getBoundsRect();this.setState("flipping");var i=e.height/10,n="bottom"===this.calc.getCorner()?e.height-i:i,o="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:n}),this.animateFlippingTo({x:e.pageWidth-i,y:n},{x:-e.pageWidth,y:o},!0)}}},{key:"flipNext",value:function(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth,y:"top"===t?1:this.render.getRect().height-2})}},{key:"flipPrev",value:function(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}},{key:"stopMove",value:function(){if(null!==this.calc){var t=this.calc.getPosition(),e=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}}},{key:"do",value:function(t){null!==this.calc&&(this.calc.calc(t),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.drawShadow(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),this.calc.getFlippingProgress(),this.calc.getDirection(),this.calc.getShadowLength()))}},{key:"animateFlippingTo",value:function(t,e,i){var n,o=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=p.GetCordsFromTwoPoint(t,e),h=[],l=Object(r["a"])(s);try{var c=function(){var t=n.value;h.push((function(){return o.do(t)}))};for(l.s();!(n=l.n()).done;)c()}catch(g){l.e(g)}finally{l.f()}var u=this.getAnimationDuration(s.length);this.render.startAnimation(h,u,(function(){o.calc&&(i&&(1===o.calc.getDirection()?o.app.turnToPrevPage():o.app.turnToNextPage()),a&&(o.render.setBottomPage(null),o.render.setFlippingPage(null),o.render.clearShadow(),o.state="read",o.reset()))}))}},{key:"getAnimationDuration",value:function(t){var e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}},{key:"getFlippingPage",value:function(t){var e=this.app.getCurrentPageIndex();return"portrait"===this.render.getOrientation()?0===t?this.app.getPage(e):this.app.getPage(e-1):e<this.app.getPageCount()-1&&e>=0?0===t?this.app.getPage(e+2):this.app.getPage(e-1):null}},{key:"getNextPage",value:function(){var t=this.app.getCurrentPageIndex(),e="portrait"===this.render.getOrientation()?0:2;return t<this.app.getPageCount()-e?this.app.getPage(t+e+1):null}},{key:"getPrevPage",value:function(){var t=this.app.getCurrentPageIndex(),e="portrait"===this.render.getOrientation()?0:2;return t-e>=0?this.app.getPage(t-e):null}},{key:"getBottomPage",value:function(t){return 0===t?this.getNextPage():this.getPrevPage()}},{key:"checkDirection",value:function(t){return 0===t?this.app.getCurrentPageIndex()<=this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}},{key:"reset",value:function(){this.calc=null,this.flippingPage=null,this.bottomPage=null}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"getPageWidth",value:function(){return this.getBoundsRect().width/2}},{key:"getPageHeight",value:function(){return this.getBoundsRect().height}},{key:"setState",value:function(t){this.app.updateState(t),this.state=t}},{key:"checkState",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,o=e;n<o.length;n++){var a=o[n];if(this.state===a)return!0}return!1}}]),t}(),b=function(){function t(e,i){Object(c["a"])(this,t),this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.shadow=null,this.pageRect=null,this.animation=null,this.timer=0,this.direction=null,this.orientation=null,this.boundsRect=null,this.setting=i,this.app=e}return Object(u["a"])(t,[{key:"drawShadow",value:function(t,e,i,n,o){if(this.app.getSettings().drawShadow){var a=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*a/100/100,direction:n,length:o}}}},{key:"clearShadow",value:function(){this.shadow=null}},{key:"setPageRect",value:function(t){this.pageRect=t}},{key:"getOrientation",value:function(){return this.orientation}},{key:"startAnimation",value:function(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}},{key:"finishAnimation",value:function(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}},{key:"render",value:function(t){if(null!==this.animation){var e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame(t)}},{key:"getRect",value:function(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}},{key:"calculateBoundsRect",value:function(){var t="landscape",e=this.getBlockWidth(),i=e/2,n=this.getBlockHeight()/2,o=this.setting.width/this.setting.height,a=this.setting.width,s=this.setting.height,r=i-a;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),a="landscape"===t?this.getBlockWidth()/2:this.getBlockWidth(),a>this.setting.maxWidth&&(a=this.setting.maxWidth),s=a/o,s>this.getBlockHeight()&&(s=this.getBlockHeight(),a=s*o),r="landscape"===t?i-a:i-a/2-a):e<2*a&&this.app.getSettings().usePortrait&&(t="portrait",r=i-a/2-a),this.boundsRect={left:r,top:n-s/2,width:2*a,height:s,pageWidth:a},t}},{key:"update",value:function(){this.boundsRect=null;var t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}},{key:"convertToBook",value:function(t){var e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}},{key:"convertToPage",value:function(t,e){e||(e=this.direction);var i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}},{key:"convertToGlobal",value:function(t,e){if(e||(e=this.direction),null==t)return null;var i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}},{key:"convertRectToGlobal",value:function(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}},{key:"start",value:function(){var t=this;this.update();var e=function e(i){t.render(i),requestAnimationFrame(e)};requestAnimationFrame(e)}},{key:"setDirection",value:function(t){this.direction=t}},{key:"getDirection",value:function(){return this.direction}},{key:"setFlippingPage",value:function(t){this.flippingPage=t}},{key:"setBottomPage",value:function(t){this.bottomPage=t}},{key:"setRightPage",value:function(t){this.rightPage=t}},{key:"setLeftPage",value:function(t){this.leftPage=t}},{key:"getSettings",value:function(){return this.app.getSettings()}}]),t}(),k=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o){var a;return Object(c["a"])(this,i),a=e.call(this,t,n),a.canvas=o,a.ctx=o.getContext("2d"),a}return Object(u["a"])(i,[{key:"getBlockWidth",value:function(){return this.canvas.offsetWidth}},{key:"getBlockHeight",value:function(){return this.canvas.offsetHeight}},{key:"getContext",value:function(){return this.ctx}},{key:"drawFrame",value:function(t){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());var e=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height),this.ctx.clip())}},{key:"drawBookShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);var i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);var n=this.ctx.createLinearGradient(0,0,e,0);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),n.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),n.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),n.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),n.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}},{key:"drawOuterShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),i.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}},{key:"drawInnerShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var n=3*this.shadow.width/4,o=this.ctx.createLinearGradient(0,0,n,0);0===this.shadow.direction?(this.ctx.translate(-n,-100),o.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),o.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),o.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),o.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=o,this.ctx.fillRect(0,0,n,2*t.height),this.ctx.restore()}},{key:"clear",value:function(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}]),i}(b),w=function(){function t(e,i,n){Object(c["a"])(this,t),this.touchPoint=null,this.swipeTimeout=250,this.swipeDistance=80,this.wrapper=e,this.wrapper.classList.add("stf__wrapper"),this.app=i;var o=this.app.getSettings().usePortrait?1:2;this.wrapper.style.minWidth=n.minWidth*o+"px",this.wrapper.style.minHeight=n.minHeight*o+"px","fixed"===n.size&&(this.wrapper.style.minWidth=n.width*o+"px",this.wrapper.style.minHeight=n.height*o+"px"),n.autoSize&&(this.wrapper.style.width="100%",this.wrapper.style.maxWidth=2*n.maxWidth+"px"),this.wrapper.style.display="block"}return Object(u["a"])(t,[{key:"getDistElement",value:function(){return this.distElement}},{key:"getWrapper",value:function(){return this.wrapper}},{key:"setOrientationStyle",value:function(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}},{key:"setHandlers",value:function(){var t=this;this.distElement.addEventListener("mousedown",(function(e){var i=t.getMousePos(e.clientX,e.clientY);t.app.startUserTouch(i),e.preventDefault()})),this.distElement.addEventListener("touchstart",(function(e){if(e.changedTouches.length>0){var i=e.changedTouches[0],n=t.getMousePos(i.clientX,i.clientY);t.touchPoint={point:n,time:Date.now()},setTimeout((function(){null!==t.touchPoint&&t.app.startUserTouch(n)}),t.swipeTimeout),e.preventDefault()}})),window.addEventListener("mousemove",(function(e){var i=t.getMousePos(e.clientX,e.clientY);t.app.userMove(i,!1)})),window.addEventListener("touchmove",(function(e){if(e.changedTouches.length>0){var i=e.changedTouches[0];t.app.userMove(t.getMousePos(i.clientX,i.clientY),!0)}})),window.addEventListener("mouseup",(function(e){var i=t.getMousePos(e.clientX,e.clientY);t.app.userStop(i)})),window.addEventListener("touchend",(function(e){if(e.changedTouches.length>0){var i=e.changedTouches[0],n=t.getMousePos(i.clientX,i.clientY),o=!1;if(null!==t.touchPoint){var a=n.x-t.touchPoint.point.x,s=Math.abs(n.y-t.touchPoint.point.y);Math.abs(a)>t.swipeDistance&&s<2*t.swipeDistance&&Date.now()-t.touchPoint.time<t.swipeTimeout&&(a>0?t.app.flipPrev(t.touchPoint.point.y<t.app.getRender().getRect().height/2?"top":"bottom"):t.app.flipNext(t.touchPoint.point.y<t.app.getRender().getRect().height/2?"top":"bottom"),o=!0),t.touchPoint=null}t.app.userStop(n,o)}}))}},{key:"getMousePos",value:function(t,e){var i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}}]),t}(),x=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o,a){var s;Object(c["a"])(this,i),s=e.call(this,t,n,o),s.distElement=t.querySelector(".stf__block");var h,l=Object(r["a"])(a);try{for(l.s();!(h=l.n()).done;){var u=h.value;s.distElement.appendChild(u)}}catch(g){l.e(g)}finally{l.f()}return window.addEventListener("resize",(function(){s.update()}),!1),s.setHandlers(),s}return Object(u["a"])(i,[{key:"update",value:function(){this.app.getRender().update()}}]),i}(w),P=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o){var a;return Object(c["a"])(this,i),a=e.call(this,t,n,o),t.innerHTML='<canvas class="stf__canvas"></canvas>',a.canvas=t.querySelectorAll("canvas")[0],window.addEventListener("resize",(function(){a.update()}),!1),a.distElement=a.canvas,a.resizeCanvas(),a.setHandlers(),a}return Object(u["a"])(i,[{key:"resizeCanvas",value:function(){var t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=i}},{key:"getCanvas",value:function(){return this.canvas}},{key:"update",value:function(){this.resizeCanvas(),this.app.getRender().update()}}]),i}(w),S=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n,o,a){var s;return Object(c["a"])(this,i),s=e.call(this,t,n),s.outerShadow=null,s.innerShadow=null,s.element=o,s.items=a,s}return Object(u["a"])(i,[{key:"getBlockWidth",value:function(){return this.element.offsetWidth}},{key:"getBlockHeight",value:function(){return this.element.offsetHeight}},{key:"clearShadow",value:function(){Object(a["a"])(Object(s["a"])(i.prototype),"clearShadow",this).call(this),this.outerShadow.remove(),this.innerShadow.remove(),this.outerShadow=null,this.innerShadow=null}},{key:"drawShadow",value:function(t,e,n,o,r){Object(a["a"])(Object(s["a"])(i.prototype),"drawShadow",this).call(this,t,e,n,o,r),null===this.outerShadow&&(this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.outerShadow.style.zIndex=(this.getSettings().startZIndex+10).toString(10),this.outerShadow.style.left="0px",this.outerShadow.style.top="0px"),null===this.innerShadow&&(this.element.insertAdjacentHTML("beforeend",'<div class="stf__innerShadow"></div>'),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.innerShadow.style.zIndex=(this.getSettings().startZIndex+10).toString(10),this.innerShadow.style.left="0px",this.innerShadow.style.top="0px")}},{key:"drawInnerShadow",value:function(){var t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,n=0===this.getDirection()?"to left":"to right",o=this.convertToGlobal(this.shadow.pos),a=this.shadow.angle+3*Math.PI/2;this.innerShadow.style.width=e+"px",this.innerShadow.style.height=2*t.height+"px",this.innerShadow.style.background="linear-gradient("+n+", rgba(0, 0, 0, "+this.shadow.opacity+") 5%, rgba(0, 0, 0, 0.05) 15%,rgba(0, 0, 0, "+this.shadow.opacity+") 35%, rgba(0, 0, 0, 0) 100% )",this.innerShadow.style.transformOrigin=i+"px 100px",this.innerShadow.style.transform="translate3d("+(o.x-i)+"px, "+(o.y-100)+"px, 0) rotate("+a+"rad)";for(var s=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft],r="polygon( ",h=0,l=s;h<l.length;h++){var c=l[h],u=1===this.getDirection()?{x:-c.x+this.shadow.pos.x,y:c.y-this.shadow.pos.y}:{x:c.x-this.shadow.pos.x,y:c.y-this.shadow.pos.y};u=p.GetRotatedPoint(u,{x:i,y:100},a),r+=u.x+"px "+u.y+"px, "}r=r.slice(0,-2),r+=")",this.innerShadow.style.clipPath=r,this.innerShadow.style.setProperty("-webkit-clip-path",r)}},{key:"drawOuterShadow",value:function(){var t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,n=1===this.getDirection()?this.shadow.width:0,o=0===this.getDirection()?"to right":"to left";this.outerShadow.style.width=this.shadow.width+"px",this.outerShadow.style.height=2*t.height+"px",this.outerShadow.style.background="linear-gradient("+o+", rgba(0, 0, 0, "+this.shadow.opacity+"), rgba(0, 0, 0, 0))",this.outerShadow.style.transformOrigin=n+"px 100px",this.outerShadow.style.transform="translate3d("+(e.x-n)+"px, "+(e.y-100)+"px, 0) rotate("+i+"rad)";var a=[];a.push({x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height});for(var s="polygon( ",r=0,h=a;r<h.length;r++){var l=h[r];if(null!==l){var c=1===this.getDirection()?{x:-l.x+this.shadow.pos.x,y:l.y-this.shadow.pos.y}:{x:l.x-this.shadow.pos.x,y:l.y-this.shadow.pos.y};c=p.GetRotatedPoint(c,{x:n,y:100},i),s+=c.x+"px "+c.y+"px, "}}s=s.slice(0,-2),s+=")",this.outerShadow.style.clipPath=s,this.outerShadow.style.setProperty("-webkit-clip-path",s)}},{key:"drawFrame",value:function(t){this.clear(),"portrait"!==this.orientation?null!=this.leftPage&&this.leftPage.simpleDraw(0):null!=this.leftPage&&this.leftPage.clearSaved(),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&("portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw())),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+4).toString(10),this.flippingPage.draw()),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow())}},{key:"clear",value:function(){var t=[];this.leftPage&&t.push(this.leftPage.getElement()),this.rightPage&&t.push(this.rightPage.getElement()),this.flippingPage&&t.push(this.flippingPage.getElement()),this.bottomPage&&t.push(this.bottomPage.getElement());var e,i=Object(r["a"])(this.items);try{for(i.s();!(e=i.n()).done;){var n=e.value;t.includes(n)||(n.style.display="none",n.style.zIndex=(this.getSettings().startZIndex+1).toString(10),n.style.transform="")}}catch(o){i.e(o)}finally{i.f()}}},{key:"clearClass",value:function(t){null!==t&&t.getElement().classList.remove("--left","--right")}},{key:"setRightPage",value:function(t){this.clearClass(this.rightPage),null!==this.rightPage&&t!==this.rightPage&&this.rightPage.clearSaved(),null!==t&&t.getElement().classList.add("--right"),Object(a["a"])(Object(s["a"])(i.prototype),"setRightPage",this).call(this,t)}},{key:"setLeftPage",value:function(t){this.clearClass(this.leftPage),null!==this.leftPage&&t!==this.rightPage&&this.leftPage.clearSaved(),null!==t&&t.getElement().classList.add("--left"),Object(a["a"])(Object(s["a"])(i.prototype),"setLeftPage",this).call(this,t)}},{key:"setBottomPage",value:function(t){null!==t&&t.getElement().classList.add(1===this.direction?"--left":"--right"),Object(a["a"])(Object(s["a"])(i.prototype),"setBottomPage",this).call(this,t)}},{key:"setFlippingPage",value:function(t){null!==t&&t.getElement().classList.add(1===this.direction?"--right":"--left"),Object(a["a"])(Object(s["a"])(i.prototype),"setFlippingPage",this).call(this,t)}},{key:"update",value:function(){Object(a["a"])(Object(s["a"])(i.prototype),"update",this).call(this),null!==this.rightPage&&(this.rightPage.getElement().classList.add("--right"),this.rightPage.clearSaved()),null!==this.leftPage&&(this.leftPage.getElement().classList.add("--left"),this.leftPage.clearSaved())}}]),i}(b),C=function(){var t=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"GetSettings",value:function(t){var e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return e.minWidth<=0&&(e.minWidth=e.width),e.maxWidth<e.minWidth&&(e.maxWidth=e.minWidth),e.minHeight<=0&&(e.minHeight=e.height),e.maxHeight<e.minHeight&&(e.maxHeight=e.minHeight),e}}]),t}();return t._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1},t}();i(0);var I=function(t){Object(h["a"])(i,t);var e=Object(l["a"])(i);function i(t,n){var o;Object(c["a"])(this,i),o=e.call(this),o.isUserTouch=!1,o.isUserMove=!1,o.pages=null,o.currentPage=0,o.setting=null;try{o.setting=C.GetSettings(n),o.block=t}catch(t){}return o}return Object(u["a"])(i,[{key:"update",value:function(){this.render.update(),this.pages.show(this.currentPage)}},{key:"turnToPrevPage",value:function(){var t="portrait"===this.render.getOrientation()?1:2;this.currentPage<t||(this.currentPage-=t,this.pages.show(this.currentPage))}},{key:"turnToNextPage",value:function(){var t="portrait"===this.render.getOrientation()?1:2;this.currentPage>this.pages.getPageCount()-t||(this.currentPage+=t,this.pages.show(this.currentPage))}},{key:"turnToPage",value:function(t){this.checkPage(t)&&(this.currentPage=t,this.pages.show(this.currentPage))}},{key:"flipNext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flip.flipNext(t)}},{key:"flipPrev",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flip.flipPrev(t)}},{key:"loadFromImages",value:function(t){this.ui=new P(this.block,this,this.setting);var e=this.ui.getCanvas();this.render=new k(this,this.setting,e),this.flip=new y(this.render,this),this.pages=new d(this,this.render,t),this.pages.load(),this.render.start(),this.currentPage=this.setting.startPage,this.pages.show(this.setting.startPage)}},{key:"loadFromHTML",value:function(t){this.ui=new x(this.block,this,this.setting,t),this.render=new S(this,this.setting,this.ui.getDistElement(),t),this.flip=new y(this.render,this),this.pages=new v(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.currentPage=this.setting.startPage,this.pages.show(this.setting.startPage)}},{key:"updateState",value:function(t){this.trigger("changeState",this,t)}},{key:"updatePage",value:function(t){this.trigger("flip",this,t)}},{key:"updateOrientation",value:function(t){"landscape"===t?(this.currentPage%2!=0&&this.currentPage--,this.update()):(this.currentPage++,this.update()),this.ui.setOrientationStyle(t),this.trigger("changeOrientation",this,t)}},{key:"getPageCount",value:function(){return this.pages.getPageCount()}},{key:"getCurrentPageIndex",value:function(){return this.currentPage}},{key:"getCurrentPage",value:function(){return this.pages.getPage(this.currentPage)}},{key:"getPage",value:function(t){return this.pages.getPage(t)}},{key:"getRender",value:function(){return this.render}},{key:"getFlipObject",value:function(){return this.flip}},{key:"getOrientation",value:function(){return this.render.getOrientation()}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"getSettings",value:function(){return this.setting}},{key:"getUI",value:function(){return this.ui}},{key:"startUserTouch",value:function(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}},{key:"userMove",value:function(t,e){this.isUserTouch||e?this.isUserTouch&&p.GetDestinationFromTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flip.fold(t)):this.flip.showCorner(t)}},{key:"userStop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flip.stopMove():this.flip.flip(t)))}},{key:"checkPage",value:function(t){return t>=0&&t<this.pages.getPageCount()}}]),i}(function(){function t(){Object(c["a"])(this,t),this.events={}}return Object(u["a"])(t,[{key:"on",value:function(t,e){return t in this.events?this.events[t].push(e):this.events[t]=[e],this}},{key:"off",value:function(t){delete this.events[t]}},{key:"trigger",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t in this.events&&this.events[t].forEach((function(t){t({data:i,object:e})}))}}]),t}());function _(){for(var e=new I(document.getElementById("htmlBookExample"),{width:550,height:733,size:"stretch",minWidth:350,maxWidth:700,minHeight:467,maxHeight:933,autoSize:!0,maxShadowOpacity:.5}),i=document.getElementById("htmlBook"),o=document.getElementById("buttonDemoSelection"),a=e,s=[],r=0,h=s;r<h.length;r++){var l=h[r];l.addEventListener("click",(function(s){var r=o.querySelector(".btn-primary");r.classList.remove("btn-primary"),r.classList.add("btn-secondary");var h=s.target;h.classList.add("btn-primary"),h.classList.remove("btn-secondary");var l=!0;"html"===h.dataset.dest||l?(a=e,n.style.display="none",i.style.display="block",e.getUI().update(),e.update()):(a=t,i.style.display="none",t.getUI().update(),t.update())}))}document.querySelector(".btn-book-next").addEventListener("click",(function(){a.flipNext()})),document.querySelector(".btn-book-prev").addEventListener("click",(function(){a.flipPrev()})),e.on("flip",(function(t){var i=parseInt(t.data.toString(),10)+1;document.querySelector(".page-count").innerHTML=i.toString(10),document.querySelector(".page-total").innerHTML=e.getPageCount().toString(10)})),e.loadFromHTML(document.querySelectorAll(".page"))}_()}])},backList:function(){this.$router.go(-1)},clickFav:function(){var t=this;if(null==this.userInfo)return alert("로그인이 필요한 서비스입니다."),void this.loginpage();p.a.post("/book/bookfavorite/CUD",{bookNo:this.booktagcat.book.bookNo}).then((function(e){"insert"==e.data?(alert("즐겨찾기 등록"),t.booktagcat.book.favoriteDate=!0):"delete"==e.data&&(alert("즐겨찾기 해제"),t.booktagcat.book.favoriteDate=!1)})).catch((function(){alert("즐겨찾기 등록/해제 도중 오류가 발생했습니다.")}))},hitBookLike:function(){var t=this;if(null==this.userInfo)return alert("로그인이 필요한 서비스입니다."),void this.loginpage();p.a.post("/book/booklike/CUD",{bookNo:this.booktagcat.book.bookNo}).then((function(){t.booktagcat.book.likeDate?(t.booktagcat.book.likeDate=!1,t.booktagcat.book.likeCount--):(t.booktagcat.book.likeDate=!0,t.booktagcat.book.likeCount++)})).catch((function(){alert("좋아요 등록/해제 중 오류 발생")}))},follow:function(){var t=this;p.a.post("/user/follow/"+this.booktagcat.book.writer).then((function(e){console.log(e),alert("팔로우가 되었습니다."),t.$router.go()})).catch((function(){alert("에러")}))},unfollow:function(){var t=this;p.a.delete("/user/follow/"+this.booktagcat.book.writer).then((function(e){console.log(e),alert("팔로우가 삭제되었습니다."),t.$router.go()}))},modifyBook:function(){this.$router.push("../modifybook/".concat(this.$route.params.bookNo))},loginpage:function(){this.$router.push("/login")},commentWrite:function(){var t=this;if(null==this.userInfo)return alert("로그인 해주세요"),void this.loginpage();""!=this.commentArea.trim()?p.a.post("/comment/CUD",{bookNo:this.booktagcat.book.bookNo,content:this.commentArea}).then((function(){t.limitStart=0,t.getCommentList(),t.commentArea="",alert("등록완료")})).catch((function(){alert("댓글 등록에 실패했습니다!")})):alert("내용을 입력해주세요")},commentDelete:function(t){var e=this;p.a.delete("/comment/CUD?commentNo=".concat(t)).then((function(){e.limitStart=0,e.getCommentList(),alert("삭제 완료")})).catch((function(){alert("댓글을 삭제하던 중 오류가 발생했습니다")}))},commentModify:function(){var t=this;p.a.put("/comment/CUD",{commentNo:this.editCommentNo,content:this.editCommentContent}).then((function(){t.getCommentList(),alert("수정완료"),t.dialog=!1})).catch((function(){alert("댓글 수정에 실패했습니다!")}))},getCommentList:function(){var t,e=this;t=this.userInfo?"/comment/comments?bookNo="+encodeURI(this.$route.params.bookNo)+"&loginUserNo="+encodeURI(this.userInfo.userNo):"/comment/comments?bookNo="+encodeURI(this.$route.params.bookNo),p.a.get(t).then((function(t){console.log("=======================댓글 조회=================================="),console.log(t.data),e.comment=t.data})).catch((function(){alert("댓글 정보를 불러오는 데 실패했습니다.")}))},hitCommentLike:function(t){if(null==this.userInfo)return alert("로그인 해주세요!"),void this.loginpage();p.a.post("/comment/commentlike/CUD",{commentNo:t.commentNo}).then((function(){t.likeDate?(t.likeDate=!1,t.likeCount--):(t.likeDate=!0,t.likeCount++)})).catch((function(){alert("좋아요 등록 중 오류 발생")}))},pickComment:function(t){var e=this;p.a.put("/comment/pick",{commentNo:t.commentNo,userNo:this.$store.getters.userInfo.userNo}).then((function(){e.getCommentList()})).catch((function(){alert("댓글 채택 도중 오류가 발생했습니다")}))},defaultbook:function(){var t,e=this;t=this.userInfo?"/book/books?writer="+encodeURI(this.$store.getters.blogInfo.userNo)+"&loginUserNo="+encodeURI(this.userInfo.userNo):"/book/books?writer="+encodeURI(this.$store.getters.blogInfo.userNo),p.a.get(t).then((function(t){for(var i=0;i<t.data.length;i++)e.blogbooks.splice(i,1,t.data[i].book)})).catch((function(){alert("게시판 책 목록을 가져오는 데 실패했습니다.")}))},go_book:function(t){this.$router.push("/bloghome/"+this.$route.params.userId+"/bookdetail/"+t.bookNo)}},data:function(){return{booktagcat:{book:""},booktag:[],tmptag:[],comment:[],likeCount:"",check:!1,following:{},dialog:!1,editCommentContent:"",editCommentNo:0,commentArea:"",commentToggle:!1,blogbooks:[]}},mounted:function(){var t,e=this;t=this.userInfo?"/book/book/".concat(this.$route.params.bookNo,"?loginUserNo=").concat(this.userInfo.userNo):"/book/book/".concat(this.$route.params.bookNo),console.log("==========================================================="),console.log("==========================================================="),p.a.get(t).then((function(t){console.log("Book 조회"),console.log(t.data),console.log(t.data.writer),e.booktagcat=t.data,p.a.get("/user/following").then((function(t){console.log(t),e.following=t.data;for(var i=0;i<t.data.length;i++)if(e.$route.params.userId==t.data[i].userId){e.check=!0;break}})).catch((function(){alert("팔로우 정보를 가져오는데 실패했습니다.")}))})).catch((function(){alert("책 정보를 불러오는 데 실패했습니다.")})),this.getCommentList(),this.defaultbook()},watch:{booktagcat:function(){setTimeout(this.bookAnimation,1e3)}},updated:function(){window.Prism.highlightAll()},computed:{serverURL:function(){return this.$store.getters.serverURL},userInfo:function(){return this.$store.getters.userInfo}}},m=v,y=(i("18ba"),i("2877")),b=i("6544"),k=i.n(b),w=i("0798"),x=i("8212"),P=i("8336"),S=i("b0af"),C=i("99d9"),I=i("cc20"),_=i("169a"),R=i("132d"),L=i("adda"),O=i("0fd9"),T=i("7efd"),j=i("9dbe"),M=i("2fa4"),E=i("8654"),A=Object(y["a"])(m,n,o,!1,null,"75443470",null);e["default"]=A.exports;k()(A,{VAlert:w["a"],VAvatar:x["a"],VBtn:P["a"],VCard:S["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VChip:I["a"],VDialog:_["a"],VIcon:R["a"],VImg:L["a"],VRow:O["a"],VSlideGroup:T["b"],VSlideItem:j["a"],VSpacer:M["a"],VTextField:E["a"]})}}]);
//# sourceMappingURL=chunk-230a8912.29ec059d.js.map